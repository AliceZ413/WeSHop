(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-495212ba"],{"25f0":function(t,e,a){"use strict";var n=a("6eeb"),i=a("825a"),o=a("d039"),r=a("ad6d"),c="toString",s=RegExp.prototype,l=s[c],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=c;(u||d)&&n(RegExp.prototype,c,(function(){var t=i(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?r.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"29a2":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return r}));a("d3b7"),a("25f0"),a("498a");function n(t){return"string"===typeof t||t instanceof String}function i(t){return"undefined"===typeof Array.isArray?"[object Array]"===Object.prototype.toString.call(t):Array.isArray(t)}function o(t){return null==t||(i(t)?0===t.length:n(t)?!"".concat(t).trim().length:"{}"===JSON.stringify(t))}function r(t){var e=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;return e.test(t)}},"498a":function(t,e,a){"use strict";var n=a("23e7"),i=a("58a8").trim,o=a("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),i=a("5899"),o="["+i+"]",r=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),s=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:s(1),end:s(2),trim:s(3)}},8856:function(t,e,a){"use strict";a("d8cf")},"9b5d":function(t,e){},c8d2:function(t,e,a){var n=a("d039"),i=a("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},d8cf:function(t,e,a){},dc3f:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("van-tabs",{attrs:{type:"card"},on:{click:t.clickLoginTab},model:{value:t.loginTabActive,callback:function(e){t.loginTabActive=e},expression:"loginTabActive"}},[a("van-tab",{attrs:{title:"登录"}},[a("van-form",{staticStyle:{"margin-top":"5vw"}},[a("van-field",{attrs:{name:"邮箱",label:"邮箱",placeholder:"邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{color:"#ee0a24",round:"",block:"",type:"info"},on:{click:t.formSubmit}},[t._v(" 登录 ")])],1)],1)],1),a("van-tab",{attrs:{title:"注册"}},[a("van-form",{staticStyle:{"margin-top":"5vw"}},[a("van-field",{attrs:{name:"邮箱",label:"邮箱",placeholder:"邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},[a("van-button",{attrs:{slot:"button",size:"small",disabled:!!t.codeSend,type:"default","native-type":"button"},on:{click:t.handleCodeSend},slot:"button"},[t._v(t._s(t.codeText))])],1),a("van-field",{attrs:{name:"邮箱验证码",label:"邮箱验证码",placeholder:"邮箱验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称"},model:{value:t.nick,callback:function(e){t.nick=e},expression:"nick"}}),a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{color:"#ee0a24",round:"",block:"",type:"info"},on:{click:t.formSubmit}},[t._v(" 注册 ")])],1)],1)],1)],1)],1)},o=[],r=(a("ac1f"),a("5319"),a("29a2")),c=a("d072"),s=(a("9b5d"),{data:function(){return{loginTabActive:0,email:"",nick:"",pwd:"",code:"",codeSend:0,codeText:"获取验证码",hasLogin:!1}},created:function(){},methods:{clickLoginTab:function(t,e){console.log(t,e)},formSubmit:function(){Object(r["a"])(this.email)?Object(r["b"])(this.pwd)?this.$toast("请输入正确的密码"):this.loginTabActive&&Object(r["b"])(this.nick)?this.$toast("请输入昵称"):!this.loginTabActive||/^\d{4}$/.test(this.code)?(this.$toast.loading({mask:!0,message:"登录中...",duration:0}),this.loginTabActive?this.emailRegister():this.emailLogin()):this.$toast("请输入正确的验证码"):this.$toast("邮箱格式错误")},emailRegister:function(){var t=this,e={code:this.code,email:this.email,pwd:this.pwd,nick:this.nick||"用户".concat(Math.random()(1e4)+1),autoLogin:!0};this.$request.post("/user/email/register",e).then((function(e){0===e.code?(c["a"].storage.set("token",e.data.token),c["a"].storage.set("uid",e.data.uid),t.$route.query.redirect?t.$router.replace({path:t.$route.query.redirect}):t.$router.replace({path:"/home"}),t.$toast.success({message:"注册成功",duration:1500})):t.$toast(e.msg)}))},emailLogin:function(){var t=this,e={deviceId:"114514",deviceName:"安卓",email:this.email,pwd:this.pwd};this.$request.post("/user/email/login",e).then((function(e){0===e.code?(c["a"].storage.set("token",e.data.token),c["a"].storage.set("uid",e.data.uid),t.$route.query.redirect?t.$router.replace({path:t.$route.query.redirect}):t.$router.replace({path:"/home"}),t.$toast.success({message:"登录成功",duration:1500})):t.$toast(e.msg)}))},handleCodeSend:function(){var t=this;if(Object(r["a"])(this.email)){if(1!==this.codeSend){clearInterval(n);var e=60;n=setInterval((function(){e<=0?(t.codeSend=0,t.codeText="获取验证码"):(t.codeSend=1,t.codeText="已发送(".concat(e,"s)"),e--)}),1e3),this.$request.get("/verification/mail/get",{mail:this.email}).then((function(e){5001===e.code?t.$toast(e.msg):t.$toast("验证码发送成功")}))}}else this.$toast("邮箱格式错误")}}}),l=s,u=(a("8856"),a("2877")),d=Object(u["a"])(l,i,o,!1,null,"026be13c",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-495212ba.6e5b369d.js.map