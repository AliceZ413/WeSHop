{"version":3,"sources":["webpack:///./src/views/goods_detail/goods_detail.vue?a433","webpack:///src/views/goods_detail/goods_detail.vue","webpack:///./src/views/goods_detail/goods_detail.vue?c39d","webpack:///./src/views/goods_detail/goods_detail.vue","webpack:///./src/views/goods_detail/goods_detail.vue?efbb","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","backHome","_l","item","key","id","directives","name","rawName","value","expression","_v","_s","basicInfo","$event","addToFav","_e","hasFav","domProps","content","kanjia","minPrice","kanjiaPrice","views","numberSells","numberGoodReputation","coupons","chosenCoupon","showList","staticStyle","model","callback","$$v","disabledCoupons","onChange","onExchange","propTitle","changeShowShopSku","skuData","sku","goods_info","onSkuSelected","onAddToCart","showShopSku","reputation","user","avatarUrl","nick","goods","$set","goodReputationRemark","property","_m","pic","cartGoods","length","staticRenderFns","component","$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","arguments","undefined","fails","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","FORCED","arg","i","k","len","E","A","n","TypeError","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error","$findIndex","findIndex","FIND_INDEX"],"mappings":"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","file":"js/chunk-06e69eda.238d3342.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container goods-detail-container\"},[_c('div',{staticClass:\"back-btn\"},[_c('van-button',{attrs:{\"icon\":\"arrow-left\",\"round\":\"\",\"color\":\"#c5c5c5\",\"type\":\"primary\"},on:{\"click\":_vm.backHome}})],1),_c('van-swipe',{staticClass:\"goods-detail-swipe\",attrs:{\"autoplay\":3000,\"indicator-color\":\"white\"}},_vm._l((_vm.banner),function(item){return _c('van-swipe-item',{key:item.id},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.pic),expression:\"item.pic\"}]})])}),1),_c('div',{staticClass:\"goods-detail-title\"},[_c('div',{staticClass:\"goods-detail-title-top\"},[_c('span',{staticClass:\"goods-name\"},[_vm._v(_vm._s(_vm.basicInfo.name))]),(_vm.hasFav)?_c('van-button',{staticClass:\"collected\",attrs:{\"color\":\"#ee0a24\",\"round\":\"\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addToFav(_vm.basicInfo.id)}}},[_vm._v(\"取消收藏\")]):_vm._e(),(!_vm.hasFav)?_c('van-button',{staticClass:\"collected\",attrs:{\"color\":\"#ee0a24\",\"round\":\"\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addToFav(_vm.basicInfo.id)}}},[_vm._v(\"收藏\")]):_vm._e()],1),_c('div',{staticClass:\"goods-detail-title-desc\",domProps:{\"innerHTML\":_vm._s(_vm.content)}}),(!_vm.basicInfo.kanjia)?_c('div',{staticClass:\"goods-detail-title-price\"},[_vm._v(\"￥\"+_vm._s(_vm.basicInfo.minPrice))]):_vm._e(),(_vm.basicInfo.kanjia)?_c('div',{staticClass:\"goods-detail-title-price\"},[_vm._v(\"￥\"+_vm._s(_vm.basicInfo.kanjiaPrice))]):_vm._e(),_c('div',{staticClass:\"goods-detail-title-bottom\"},[_c('span',[_vm._v(\"浏览: \"+_vm._s(_vm.basicInfo.views))]),_c('span',[_vm._v(\"购买: \"+_vm._s(_vm.basicInfo.numberSells))]),_c('span',[_vm._v(\"好评: \"+_vm._s(_vm.basicInfo.numberGoodReputation))])])]),_c('div',{staticClass:\"goods-detail-lingjuan\"},[_c('van-coupon-cell',{attrs:{\"coupons\":_vm.coupons,\"chosen-coupon\":_vm.chosenCoupon},on:{\"click\":function($event){_vm.showList = true}}}),_c('van-popup',{staticStyle:{\"height\":\"90%\",\"padding-top\":\"4px\"},attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showList),callback:function ($$v) {_vm.showList=$$v},expression:\"showList\"}},[_c('van-coupon-list',{attrs:{\"coupons\":_vm.coupons,\"chosen-coupon\":_vm.chosenCoupon,\"disabled-coupons\":_vm.disabledCoupons},on:{\"change\":_vm.onChange,\"exchange\":_vm.onExchange}})],1)],1),_c('div',{staticClass:\"goods-detail-edition\"},[_c('van-cell',{attrs:{\"title\":_vm.propTitle,\"is-link\":\"\"},on:{\"click\":_vm.changeShowShopSku}}),_c('van-sku',{attrs:{\"sku\":_vm.skuData.sku,\"goods\":_vm.skuData.goods_info},on:{\"sku-selected\":_vm.onSkuSelected,\"add-cart\":_vm.onAddToCart},model:{value:(_vm.showShopSku),callback:function ($$v) {_vm.showShopSku=$$v},expression:\"showShopSku\"}})],1),_c('div',{staticClass:\"goods-detail-service\"},[_c('van-cell',{attrs:{\"title\":\"服务 担保\",\"is-link\":\"\"}})],1),_c('div',{staticClass:\"goods-detail-comment\"},[_c('van-cell',{attrs:{\"title\":(\"评论(\" + (this.reputation.length) + \")\"),\"value\":\"全部评论\",\"is-link\":\"\"}}),_vm._l((_vm.reputation),function(item){return _c('div',{key:item.id,staticClass:\"goods-detail-comment-item\"},[_c('div',{staticClass:\"goods-detail-comment-item-top\"},[_c('div',{staticClass:\"goods-comment-item-user\"},[_c('img',{attrs:{\"src\":item.user.avatarUrl}}),_c('span',{staticClass:\"username\"},[_vm._v(_vm._s(item.user.nick))])]),_c('div',{staticClass:\"goods-comment-item-star\"},[_c('van-rate',{attrs:{\"readonly\":\"\",\"size\":\"14\"},model:{value:(item.goods.goodReputationStr),callback:function ($$v) {_vm.$set(item.goods, \"goodReputationStr\", $$v)},expression:\"item.goods.goodReputationStr\"}})],1)]),_c('div',{staticClass:\"goods-comment-item-content\"},[_vm._v(\" \"+_vm._s(item.goods.goodReputationRemark)+\" \")]),_c('div',{staticClass:\"goods-comment-item-edition\"},[_vm._v(\" \"+_vm._s(item.goods.property)+\" \")])])})],2),_c('div',{staticClass:\"goods-detail-detail\"},[_vm._m(0),_vm._l((_vm.banner),function(item){return _c('div',{key:item.id,staticClass:\"goods-detail-desc-img\"},[_c('img',{attrs:{\"src\":item.pic,\"alt\":\"\"}})])})],2),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"wap-home-o\",\"text\":\"首页\",\"dot\":\"\",\"to\":\"/home\"}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"comment-o\",\"text\":\"客服\"}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"shopping-cart-o\",\"text\":\"购物车\",\"badge\":_vm.cartGoods.length,\"to\":\"/cart\"}}),_c('van-goods-action-button',{attrs:{\"type\":\"warning\",\"text\":\"加入购物车\"},on:{\"click\":_vm.changeShowShopSku}}),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"text\":\"立即购买\"},on:{\"click\":_vm.changeShowShopSku}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section-header common-h2\"},[_c('span',{staticClass:\"common-h2-title\"},[_vm._v(\"商品列表\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"container goods-detail-container\">\r\n\t\t<div class=\"back-btn\">\r\n\t\t\t<van-button icon=\"arrow-left\" round color=\"#c5c5c5\" type=\"primary\" @click=\"backHome\"></van-button>\r\n\t\t</div>\r\n\t\t<van-swipe class=\"goods-detail-swipe\" :autoplay=\"3000\" indicator-color=\"white\">\r\n\t\t\t<van-swipe-item v-for=\"item in banner\" :key=\"item.id\">\r\n\t\t\t\t<img v-lazy=\"item.pic\">\r\n\t\t\t</van-swipe-item>\r\n\t\t</van-swipe>\r\n\t\t<div class=\"goods-detail-title\">\r\n\t\t\t<div class=\"goods-detail-title-top\">\r\n\t\t\t\t<span class=\"goods-name\">{{basicInfo.name}}</span>\r\n\t\t\t\t<van-button class=\"collected\" color=\"#ee0a24\" round plain size=\"mini\" v-if=\"hasFav\" @click=\"addToFav(basicInfo.id)\">取消收藏</van-button>\r\n\t\t\t\t<van-button class=\"collected\" color=\"#ee0a24\" round plain size=\"mini\" v-if=\"!hasFav\" @click=\"addToFav(basicInfo.id)\">收藏</van-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"goods-detail-title-desc\" v-html=\"content\"></div>\r\n\t\t\t<div class=\"goods-detail-title-price\" v-if=\"!basicInfo.kanjia\">￥{{basicInfo.minPrice}}</div>\r\n\t\t\t<div class=\"goods-detail-title-price\" v-if=\"basicInfo.kanjia\">￥{{basicInfo.kanjiaPrice}}</div>\r\n\t\t\t<div class=\"goods-detail-title-bottom\">\r\n\t\t\t\t<span>浏览: {{basicInfo.views}}</span>\r\n\t\t\t\t<span>购买: {{basicInfo.numberSells}}</span>\r\n\t\t\t\t<span>好评: {{basicInfo.numberGoodReputation}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"goods-detail-lingjuan\">\r\n\t\t\t<van-coupon-cell :coupons=\"coupons\" :chosen-coupon=\"chosenCoupon\" @click=\"showList = true\" />\r\n\t\t\t<van-popup v-model=\"showList\" round position=\"bottom\" style=\"height: 90%; padding-top: 4px;\">\r\n\t\t\t\t<van-coupon-list :coupons=\"coupons\" :chosen-coupon=\"chosenCoupon\" :disabled-coupons=\"disabledCoupons\" @change=\"onChange\"\r\n\t\t\t\t @exchange=\"onExchange\" />\r\n\t\t\t</van-popup>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"goods-detail-edition\">\r\n\t\t\t<van-cell :title=\"propTitle\" is-link @click=\"changeShowShopSku\" />\r\n\t\t\t<van-sku v-model=\"showShopSku\" :sku=\"skuData.sku\" :goods=\"skuData.goods_info\" @sku-selected=\"onSkuSelected\"\r\n\t\t\t @add-cart=\"onAddToCart\" />\r\n\t\t</div>\r\n\r\n\t\t<div class=\"goods-detail-service\">\r\n\t\t\t<van-cell title=\"服务 担保\" is-link />\r\n\t\t</div>\r\n\r\n\t\t<div class=\"goods-detail-comment\">\r\n\t\t\t<van-cell :title=\"`评论(${this.reputation.length})`\" value=\"全部评论\" is-link />\r\n\t\t\t<div class=\"goods-detail-comment-item\" v-for=\"item in reputation\" :key=\"item.id\">\r\n\t\t\t\t<div class=\"goods-detail-comment-item-top\">\r\n\t\t\t\t\t<!-- 用户 -->\r\n\t\t\t\t\t<div class=\"goods-comment-item-user\">\r\n\t\t\t\t\t\t<img :src=\"item.user.avatarUrl\">\r\n\t\t\t\t\t\t<span class=\"username\">{{item.user.nick}}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<!-- 评级 -->\r\n\t\t\t\t\t<div class=\"goods-comment-item-star\">\r\n\t\t\t\t\t\t<van-rate v-model=\"item.goods.goodReputationStr\" readonly size=\"14\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<!-- 内容 -->\r\n\t\t\t\t<div class=\"goods-comment-item-content\">\r\n\t\t\t\t\t{{item.goods.goodReputationRemark}}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<!-- 商品详情 -->\r\n\t\t\t\t<div class=\"goods-comment-item-edition\">\r\n\t\t\t\t\t{{item.goods.property}}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"goods-detail-detail\">\r\n\t\t\t<div class=\"section-header common-h2\">\r\n\t\t\t\t<span class=\"common-h2-title\">商品列表</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"goods-detail-desc-img\" v-for=\"item in banner\" :key=\"item.id\">\r\n\t\t\t\t<img :src=\"item.pic\" alt=\"\">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\r\n\t\t<van-goods-action>\r\n\t\t\t<van-goods-action-icon icon=\"wap-home-o\" text=\"首页\" dot to=\"/home\" />\r\n\t\t\t<van-goods-action-icon icon=\"comment-o\" text=\"客服\" />\r\n\t\t\t<van-goods-action-icon icon=\"shopping-cart-o\" text=\"购物车\" :badge=\"cartGoods.length\" to=\"/cart\" />\r\n\t\t\t<van-goods-action-button type=\"warning\" text=\"加入购物车\" @click=\"changeShowShopSku\" />\r\n\t\t\t<van-goods-action-button type=\"danger\" text=\"立即购买\" @click=\"changeShowShopSku\" />\r\n\t\t</van-goods-action>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\tconst coupon = {\r\n\t\tavailable: 1,\r\n\t\tcondition: '无使用门槛\\n最多优惠12元',\r\n\t\treason: '',\r\n\t\tvalue: 150,\r\n\t\tname: '优惠券名称',\r\n\t\tstartAt: 1489104000,\r\n\t\tendAt: 1514592000,\r\n\t\tvalueDesc: '1.5',\r\n\t\tunitDesc: '元',\r\n\t};\r\n\timport util from '../../common/util/util.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactive: 0,\r\n\t\t\t\tbanner: [],\r\n\t\t\t\tlist: [],\r\n\t\t\t\tlistKanjia: [],\r\n\t\t\t\tlistPintuan: [],\r\n\t\t\t\tpintuanSets: [],\r\n\t\t\t\tgoodsMap: {},\r\n\t\t\t\tbasicInfo: {},\r\n\t\t\t\treputation: [],\r\n\t\t\t\tcontent: {},\r\n\t\t\t\tproperties: [],\r\n\t\t\t\tpropTitle: '请选择版本',\r\n\t\t\t\tshowShopSku: false,\r\n\t\t\t\tskuData: {\r\n\t\t\t\t\tgoods_id: '',\r\n\t\t\t\t\tquota: 0, // 0表示不限购\r\n\t\t\t\t\tquota_used: 0,\r\n\t\t\t\t\tgoods_info: {},\r\n\t\t\t\t\tsku: {\r\n\t\t\t\t\t\tprice: '1.00', // 默认价格（单位元）\r\n\t\t\t\t\t\tstock_num: 100, // 商品总库存\r\n\t\t\t\t\t\tnone_sku: false, // 是否无规格商品\r\n\t\t\t\t\t\thide_stock: false, // 是否隐藏剩余库存\r\n\t\t\t\t\t\tcollection_id: 2261, // 无规格商品 skuId 取 collection_id，否则取所选 sku 组合对应的 id\r\n\t\t\t\t\t\ttree: [],\r\n\t\t\t\t\t\tlist: [],\r\n\t\t\t\t\t\tmessages: []\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\t// 默认商品 sku 缩略图\r\n\t\t\t\t\tpicture: 'https://img.yzcdn.cn/2.jpg'\r\n\t\t\t\t},\r\n\t\t\t\tmessageConfig: {\r\n\t\t\t\t\t// 图片上传回调，需要返回一个promise，promise正确执行的结果需要是一个图片url\r\n\t\t\t\t\tuploadImg: () => {\r\n\t\t\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\t\t\tsetTimeout(() => resolve(\r\n\t\t\t\t\t\t\t\t'https://img.yzcdn.cn/upload_files/2017/02/21/FjKTOxjVgnUuPmHJRdunvYky9OHP.jpg!100x100.jpg'), 1000);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 最大上传体积 (MB)\r\n\t\t\t\t\tuploadMaxSize: 3,\r\n\t\t\t\t\t// placeholder 配置\r\n\t\t\t\t\tplaceholderMap: {\r\n\t\t\t\t\t\ttext: 'xxx',\r\n\t\t\t\t\t\ttel: 'xxx',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// 初始留言信息\r\n\t\t\t\t\t// 键：留言 name\r\n\t\t\t\t\t// 值：留言内容\r\n\t\t\t\t\tinitialMessages: {\r\n\t\t\t\t\t\t留言: '留言信息'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tstarNum: 5,\r\n\t\t\t\tshowList: false,\r\n\t\t\t\tchosenCoupon: -1,\r\n\t\t\t\tcoupons: [coupon],\r\n\t\t\t\tdisabledCoupons: [coupon],\r\n\t\t\t\thasFav: false,\r\n\t\t\t\tcartGoods: [],\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getGoodsDetail(this.$route.query.id);\r\n\t\t\tthis.getCart();\r\n\t\t\tthis.getReputation(this.$route.query.id);\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\t\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\twindow.addEventListener('scroll', this.onPageScroll, false)\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\twindow.removeEventListener('scroll', this.onPageScroll, false)\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// cartGoodsLength(){\r\n\r\n\t\t\t// }\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\trateChange(val) {\r\n\t\t\t\tlet value = 5\r\n\t\t\t\tswitch (val) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tvalue = 1\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tvalue = 3\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tvalue = 5\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tvalue = 5\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t},\r\n\t\t\tgetCart() {\r\n\t\t\t\tthis.cartGoods = util.storage.get('cartInfo') || [];\r\n\t\t\t\tconsole.log(this.cartGoods);\r\n\t\t\t},\r\n\t\t\tbackHome() {\r\n\t\t\t\tthis.$router.go(-1);\r\n\t\t\t},\r\n\t\t\tcheckFav(goodsId) {\r\n\t\t\t\tthis.$request.get('/shop/goods/fav/check', {\r\n\t\t\t\t\tgoodsId: goodsId,\r\n\t\t\t\t\ttoken: util.storage.get('token')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.data === '已收藏') {\r\n\t\t\t\t\t\tthis.hasFav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetGoodsDetail(id) {\r\n\t\t\t\tthis.$request.get('/shop/goods/detail', {\r\n\t\t\t\t\tid\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\tthis.$toast(res.msg)\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tthis.banner = res.data.pics;\r\n\t\t\t\t\tthis.basicInfo = res.data.basicInfo;\r\n\t\t\t\t\tthis.content = res.data.content;\r\n\t\t\t\t\t// 如果 basicInfo.logisticsId 为0,则是 虚拟商品 [不使用物流（不需要用户填写收货地址的商品）]\r\n\t\t\t\t\tthis.logistics = res.data.logistics || {};\r\n\t\t\t\t\tthis.properties = res.data.properties || [];\r\n\r\n\t\t\t\t\tthis.initSkuData(this.properties, this.basicInfo);\r\n\r\n\t\t\t\t\tthis.checkFav(this.basicInfo.id);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetReputation(goodsId) {\r\n\t\t\t\tthis.$request.post('/shop/goods/reputation', {\r\n\t\t\t\t\tgoodsId\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log('res', res);\r\n\t\t\t\t\tthis.reputation = [res.data[0], res.data[1]];\r\n\t\t\t\t\tthis.reputation.map(item=>{\r\n\t\t\t\t\t\treturn item.goods.goodReputationStr = this.rateChange(item.goods.goodReputationStr);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log('reputation', this.reputation);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitSkuData(properties, basicInfo) {\r\n\t\t\t\t// 商品规格sku数据\r\n\t\t\t\tconst tree = properties.map((item, index) => ({\r\n\t\t\t\t\tk: item.name,\r\n\t\t\t\t\tk_id: item.id,\r\n\t\t\t\t\tv: item.childsCurGoods,\r\n\t\t\t\t\tk_s: 's' + (index + 1),\r\n\t\t\t\t\tcount: item.childsCurGoods.length\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.skuData.goods_info = {\r\n\t\t\t\t\ttitle: basicInfo.name,\r\n\t\t\t\t\tpicture: basicInfo.pic\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.skuData.goods_id = basicInfo.id // 商品id\r\n\t\t\t\tthis.skuData.sku.price = basicInfo.minPrice // 默认价格（单位元）\r\n\t\t\t\tthis.skuData.sku.stock_num = basicInfo.stores // 商品总库存\r\n\t\t\t\tthis.skuData.sku.tree = tree\r\n\t\t\t\t// 商品无规格\r\n\t\t\t\tif (tree.length === 0) {\r\n\t\t\t\t\tthis.propTitle = ''\r\n\t\t\t\t\tthis.skuData.none_sku = true\r\n\t\t\t\t\t// this.skuData.collection_id= 2261\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 商品多个规格\r\n\t\t\t\tthis.propTitle = `选择 ${tree.reduce((total, item) => total + ' ' + item.k, '')}`\r\n\t\t\t\tif (tree.length > 0) {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 生成笛卡尔积\r\n\t\t\t\t\t * @returns {*}\r\n\t\t\t\t\t */\r\n\t\t\t\t\tconst descartes = function(array) {\r\n\t\t\t\t\t\tif (array.length < 2) return array[0] || []\r\n\t\t\t\t\t\treturn [].reduce.call(array, function(col, set) {\r\n\t\t\t\t\t\t\tvar res = []\r\n\t\t\t\t\t\t\tcol.forEach(function(c) {\r\n\t\t\t\t\t\t\t\tset.forEach(function(s) {\r\n\t\t\t\t\t\t\t\t\tvar t = [].concat(Array.isArray(c) ? c : [c])\r\n\t\t\t\t\t\t\t\t\tt.push(s)\r\n\t\t\t\t\t\t\t\t\tres.push(t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn res\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst calc = descartes(Array.prototype.concat.apply([], tree.map(item => [item.v])))\r\n\t\t\t\t\tthis.skuData.sku.list = calc.map(item => {\r\n\t\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\t\tprice: parseFloat((basicInfo.minPrice * 100)), // 价格（单位分）\r\n\t\t\t\t\t\t\tstock_num: basicInfo.stores // 当前 sku 组合对应的库存\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Array.isArray(item)) {\r\n\t\t\t\t\t\t\t// 2种规格以上\r\n\t\t\t\t\t\t\titem.forEach((v, i) => {\r\n\t\t\t\t\t\t\t\tobj[`s${i + 1}`] = v.id\r\n\t\t\t\t\t\t\t\tobj.propertyChildIds = `${obj.propertyChildIds || ''}${v.propertyId}:${v.id},`\r\n\t\t\t\t\t\t\t\tobj.id = `${obj.id || ''}${v.propertyId}${v.id}`\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn obj\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 只有一种规格的情况下\r\n\t\t\t\t\t\t\tobj['s1'] = item.id\r\n\t\t\t\t\t\t\tobj.propertyChildIds = `${item.propertyId}:${item.id},`\r\n\t\t\t\t\t\t\tobj.id = `${item.propertyId}${item.id}`\r\n\t\t\t\t\t\t\treturn obj\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonSkuSelected(data) {\r\n\t\t\t\tconsole.log('this.skuData', this.skuData);\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tif (data.selectedSkuComb) {\r\n\t\t\t\t\tconst title = []\r\n\t\t\t\t\tthis.properties.forEach((item, index) => {\r\n\t\t\t\t\t\tconst current = item.childsCurGoods.find(v => v.id === data.selectedSku[`s${index + 1}`])\r\n\t\t\t\t\t\ttitle.push(current.name)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.propTitle = `已选 ${title.join(',')}`\r\n\t\t\t\t\tthis.getGoodsPrice(this.basicInfo.id, data.selectedSkuComb.propertyChildIds, (res) => {\r\n\t\t\t\t\t\tthis.basicInfo.minPrice = res.data.price\r\n\t\t\t\t\t\tthis.basicInfo.originalPrice = res.data.originalPrice\r\n\t\t\t\t\t\tthis.basicInfo.pingtuanPrice = res.data.pingtuanPrice\r\n\t\t\t\t\t\tthis.basicInfo.stores = res.data.stores\r\n\t\t\t\t\t\tdata.selectedSkuComb.price = parseFloat((res.data.price * 100)) // 价格（单位分）\r\n\t\t\t\t\t\tdata.selectedSkuComb.stock_num = res.data.stores\r\n\t\t\t\t\t\tdata.selectedSkuComb.propertyChildIds = res.data.propertyChildIds\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetGoodsPrice(goodsId, propertyChildIds, callback) {\r\n\t\t\t\tthis.$request.post('/shop/goods/price', {\r\n\t\t\t\t\tgoodsId,\r\n\t\t\t\t\tpropertyChildIds\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tcallback(res)\r\n\t\t\t\t\t// this.$toast.clear()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonChange(index) {\r\n\t\t\t\tthis.showList = false;\r\n\t\t\t\tthis.chosenCoupon = index;\r\n\t\t\t},\r\n\t\t\tonExchange(code) {\r\n\t\t\t\tthis.coupons.push(coupon);\r\n\t\t\t},\r\n\t\t\tchangeShowShopSku() {\r\n\t\t\t\t// console.log(1);\r\n\t\t\t\tthis.showShopSku = true;\r\n\t\t\t},\r\n\t\t\tonAddToCart(data) {\r\n\t\t\t\tdata.goodsId = this.skuData.goods_id;\r\n\t\t\t\t// console.log('skuData',this.skuData);\r\n\t\t\t\t// console.log('data',data);\r\n\t\t\t\t// 获取存在本地的购物车详情\r\n\t\t\t\tconst goodsInfo = util.storage.get('cartInfo') || [];\r\n\t\t\t\t// 判断是否有规格\r\n\t\t\t\tif (this.properties.length) {\r\n\t\t\t\t\t// 添加相同且规格一致的商品\r\n\t\t\t\t\tconst index = goodsInfo.findIndex(item => item.goodsId === data.goodsId && item.propertyChildIds === data.selectedSkuComb\r\n\t\t\t\t\t\t.propertyChildIds);\r\n\t\t\t\t\tif (goodsInfo.length && index > -1) {\r\n\t\t\t\t\t\tgoodsInfo[index].selectedNum = goodsInfo[index].selectedNum + data.selectedNum;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgoodsInfo.push({\r\n\t\t\t\t\t\t\tid: `${Date.now()}`,\r\n\t\t\t\t\t\t\tgoodsId: data.goodsId,\r\n\t\t\t\t\t\t\tpropertyChildIds: data.selectedSkuComb.propertyChildIds,\r\n\t\t\t\t\t\t\tpropTitle: this.propTitle.replace('已选 ', ''),\r\n\t\t\t\t\t\t\tprice: parseFloat((data.selectedSkuComb.price / 100).toFixed(2)),\r\n\t\t\t\t\t\t\tselectedNum: data.selectedNum,\r\n\t\t\t\t\t\t\tmessages: data.messages,\r\n\t\t\t\t\t\t\tname: this.basicInfo.name,\r\n\t\t\t\t\t\t\tcharacteristic: this.basicInfo.characteristic,\r\n\t\t\t\t\t\t\tpic: this.basicInfo.pic,\r\n\t\t\t\t\t\t\tmarketing: {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 添加相同且规格一致的商品\r\n\t\t\t\t\tconst index = goodsInfo.findIndex(item => item.goodsId === data.goodsId);\r\n\t\t\t\t\tif (goodsInfo.length && index > -1) {\r\n\t\t\t\t\t\tgoodsInfo[index].selectedNum = goodsInfo[index].selectedNum + data.selectedNum;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgoodsInfo.push({\r\n\t\t\t\t\t\t\tid: `${Date.now()}`,\r\n\t\t\t\t\t\t\tgoodsId: data.goodsId,\r\n\t\t\t\t\t\t\tpropertyChildIds: '',\r\n\t\t\t\t\t\t\tpropTitle: this.propTitle.replace('已选 ', ''),\r\n\t\t\t\t\t\t\tprice: this.basicInfo.minPrice,\r\n\t\t\t\t\t\t\tselectedNum: data.selectedNum,\r\n\t\t\t\t\t\t\tmessages: data.messages,\r\n\t\t\t\t\t\t\tname: this.basicInfo.name,\r\n\t\t\t\t\t\t\tcharacteristic: this.basicInfo.characteristic,\r\n\t\t\t\t\t\t\tpic: this.basicInfo.pic,\r\n\t\t\t\t\t\t\tmarketing: {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$toast({\r\n\t\t\t\t\tmessage: '已成功添加到购物车',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t});\r\n\t\t\t\tutil.storage.set('cartInfo', goodsInfo);\r\n\t\t\t\tthis.showShopSku = !this.showShopSku;\r\n\t\t\t},\r\n\t\t\taddToFav(goodsId) {\r\n\t\t\t\tif (this.hasFav) {\r\n\t\t\t\t\t//如果已经收藏\r\n\t\t\t\t\t//取消收藏\r\n\t\t\t\t\tthis.$request.post('/shop/goods/fav/delete', {\r\n\t\t\t\t\t\tgoodsId: goodsId,\r\n\t\t\t\t\t\ttoken: util.storage.get('token')\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.hasFav = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$request.post('/shop/goods/fav/add', {\r\n\t\t\t\t\t\tgoodsId: goodsId,\r\n\t\t\t\t\t\ttoken: util.storage.get('token')\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tthis.hasFav = true;\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.goods-detail-container {\r\n\t\tmargin-bottom: 16vw;\r\n\t}\r\n\r\n\t.back-btn {\r\n\t\tposition: absolute;\r\n\t\ttop: 10px;\r\n\t\tleft: 10px;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.goods-detail-swipe {\r\n\t\t/* border-bottom: 1px solid rgba(0,0,0,0.05); */\r\n\t}\r\n\r\n\t.goods-detail-swipe .van-swipe-item {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 20px;\r\n\t\t/* line-height: 150px; */\r\n\t\ttext-align: center;\r\n\t\t/* background-color: #39a9ed; */\r\n\t\twidth: 100%;\r\n\t\t/* height: 250px; */\r\n\t}\r\n\r\n\t.goods-detail-swipe .van-swipe-item img {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t}\r\n\r\n\t.goods-detail-title {\r\n\t\tpadding: 10px;\r\n\t\tmargin-top: 30px;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top: 1px solid rgba(0, 0, 0, .1);\r\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, .08);\r\n\t}\r\n\r\n\t.goods-detail-title-top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.goods-detail-title-top span.goods-name {\r\n\t\tfont-size: 20px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.collected {\r\n\t\twidth: 60px;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.goods-detail-title-desc {\r\n\t\tfont-size: 12px;\r\n\t\ttext-align: start;\r\n\t\tcolor: #999;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t}\r\n\r\n\t.goods-detail-title-price {\r\n\t\tmargin-top: 10px;\r\n\t\tfont-size: 25px;\r\n\t\tcolor: #ee0a24;\r\n\t\ttext-align: start;\r\n\t}\r\n\r\n\t.goods-detail-title-bottom {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.goods-detail-title-bottom span {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.goods-detail-edition,\r\n\t.goods-detail-service,\r\n\t.goods-detail-lingjuan,\r\n\t.goods-detail-comment {\r\n\t\tmargin-top: 10px;\r\n\t\ttext-align: start;\r\n\r\n\t}\r\n\r\n\t.goods-detail-comment-item {\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.goods-detail-comment-item-top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.goods-comment-item-user {\r\n\t\tfloat: left;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.goods-comment-item-user img {\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.goods-comment-item-user span.username {\r\n\t\tline-height: 30px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.goods-comment-item-star {\r\n\t\tfloat: right;\r\n\t}\r\n\r\n\t.goods-comment-item-content,\r\n\t.goods-comment-item-edition {\r\n\t\tmargin-top: 5px;\r\n\t\tline-height: 25px;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.goods-detail-detail {\r\n\t\tmargin-top: 10px;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 5px 0px;\r\n\t}\r\n\r\n\t.goods-detail-desc-img img {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t}\r\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./goods_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./goods_detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./goods_detail.vue?vue&type=template&id=43c297f5&scoped=true&\"\nimport script from \"./goods_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./goods_detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods_detail.vue?vue&type=style&index=0&id=43c297f5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43c297f5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./goods_detail.vue?vue&type=style&index=0&id=43c297f5&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}