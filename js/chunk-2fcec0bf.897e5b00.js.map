{"version":3,"sources":["webpack:///./src/views/order/order-submit.vue?c20e","webpack:///./src/common/pay/pay.js","webpack:///src/views/order/order-submit.vue","webpack:///./src/views/order/order-submit.vue?1db1","webpack:///./src/views/order/order-submit.vue","webpack:///./src/components/topNav.vue?d38e","webpack:///./src/views/order/order-submit.vue?3eaa","webpack:///./src/components/topNav.vue?9069","webpack:///src/components/topNav.vue","webpack:///./src/components/topNav.vue?7d83","webpack:///./src/components/topNav.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","isleftarrow","defaultAddress","on","onAddressChoose","_v","_s","linkMan","mobile","address","_e","goodsInfo","_l","item","index","key","id","selectedNum","price","propTitle","name","pic","scopedSlots","_u","fn","proxy","model","value","callback","$$v","remark","expression","_f","totalPrice","onSubmit","staticRenderFns","pay_balance","orderId","token","request","post","component","onClickLeft"],"mappings":"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","file":"js/chunk-2fcec0bf.897e5b00.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('topNav',{staticClass:\"topNav\",attrs:{\"title\":_vm.title,\"isleftarrow\":_vm.isleftarrow}}),(_vm.isNeedLogistics)?[(_vm.defaultAddress.linkMan)?_c('div',{staticClass:\"address-box mb10\",on:{\"click\":_vm.onAddressChoose}},[_c('div',{staticClass:\"address-box-hd\"},[_c('div',{staticClass:\"address-box-inner\"},[_c('van-icon',{staticClass:\"address-box-inner-icon\",attrs:{\"name\":\"location-o\"}}),_c('div',{staticClass:\"address-box-inner-title\"},[_vm._v(\"收货人：\"+_vm._s(_vm.defaultAddress.linkMan))]),_c('div',{staticClass:\"address-box-inner-title\"},[_vm._v(_vm._s(_vm.defaultAddress.mobile))])],1),_c('div',{staticClass:\"address-box-inner-bottom\"},[_vm._v(\"收货地址：\"+_vm._s(_vm.defaultAddress.address))])]),_c('div',{staticClass:\"address-box-bd\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]):_c('van-contact-card',{attrs:{\"type\":\"add\",\"add-text\":\"添加地址\"},on:{\"click\":_vm.onAddressChoose}})]:_vm._e(),(_vm.goodsInfo.length)?_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"group balance-group\"},_vm._l((_vm.goodsInfo),function(item,index){return _c('van-card',{key:item.id,attrs:{\"num\":item.selectedNum,\"price\":item.price,\"desc\":item.propTitle,\"title\":item.name,\"thumb\":item.pic}})}),1),_c('van-cell-group',[_c('van-cell',{attrs:{\"is-link\":\"\",\"value\":\"选择\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-icon',{staticClass:\"icon-logistics\",attrs:{\"name\":\"logistics\"}}),_c('span',{staticClass:\"custom-title\"},[_vm._v(\"配送方式\")])]},proxy:true}],null,false,457227271)})],1),_c('van-cell-group',[_c('van-field',{staticClass:\"mb10\",attrs:{\"label\":\"买家留言\",\"type\":\"textarea\",\"placeholder\":\"点击给商家留言\",\"rows\":\"1\",\"autosize\":\"\"},model:{value:(_vm.remark),callback:function ($$v) {_vm.remark=$$v},expression:\"remark\"}})],1)],1):_vm._e(),_c('van-submit-bar',{attrs:{\"price\":_vm._f(\"formatPoint\")(_vm.totalPrice),\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* \r\n\t/order/pay订单支付\r\n*/\r\nimport request from '../../plugins/axios.js'\n/**\n * 钱包支付\n * @param {String} orderId\n * @param {String} token\n */\nexport function pay_balance(orderId, token) {\n  return request.post('/order/pay', { orderId, token })\n}\n/**\n * 公众号网页支付\n * @param {Number} money\n * @param {object} nextAction\n * @param {String} payName\n * @param {String} remark\n * @param {String} token\n */\nexport function wxPay_jsapi(money, nextAction, payName, remark = '', token) {\n  return request.post('/pay/wx/h5', { money, nextAction, payName, remark, token })\n}\n","<template>\r\n\t<div class=\"container\">\r\n\t\t<topNav class=\"topNav\" :title=\"title\" :isleftarrow=\"isleftarrow\"></topNav>\r\n\t\t<!-- 地址 -->\r\n\t\t<template v-if=\"isNeedLogistics\">\r\n\t\t\t<div class=\"address-box mb10\" v-if=\"defaultAddress.linkMan\" @click=\"onAddressChoose\">\r\n\t\t\t\t<div class=\"address-box-hd\">\r\n\t\t\t\t\t<div class=\"address-box-inner\">\r\n\t\t\t\t\t\t<van-icon name=\"location-o\" class=\"address-box-inner-icon\" />\r\n\t\t\t\t\t\t<div class=\"address-box-inner-title\">收货人：{{defaultAddress.linkMan}}</div>\r\n\t\t\t\t\t\t<div class=\"address-box-inner-title\">{{defaultAddress.mobile}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"address-box-inner-bottom\">收货地址：{{defaultAddress.address}}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"address-box-bd\">\r\n\t\t\t\t\t<van-icon name=\"arrow\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<van-contact-card v-else type=\"add\" add-text=\"添加地址\" @click=\"onAddressChoose\" />\r\n\t\t</template>\r\n\t\t<!-- \r\n\t\t商品信息\r\n\t\t配送方式\r\n\t\t备注\r\n\t\t小计-->\r\n\t\t<div class=\"main\" v-if=\"goodsInfo.length\">\r\n\t\t\t<div class=\"group balance-group\">\r\n\t\t\t\t<van-card v-for=\"(item,index) in goodsInfo\" :key=\"item.id\" :num=\"item.selectedNum\" :price=\"item.price\" :desc=\"item.propTitle\"\r\n\t\t\t\t :title=\"item.name\" :thumb=\"item.pic\" />\r\n\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t<van-cell-group>\r\n\t\t\t\t<van-cell is-link value=\"选择\">\r\n\t\t\t\t\t<template #title>\r\n\t\t\t\t\t\t<van-icon name=\"logistics\" class=\"icon-logistics\" />\r\n\t\t\t\t\t\t<span class=\"custom-title\">配送方式</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</van-cell>\r\n\t\t\t</van-cell-group>\r\n\t\t\t<van-cell-group>\r\n\t\t\t\t<van-field class=\"mb10\" v-model=\"remark\" label=\"买家留言\" type=\"textarea\" placeholder=\"点击给商家留言\" rows=\"1\" autosize />\r\n\t\t\t</van-cell-group>\r\n\t\t</div>\r\n\t\t<!-- 提交订单 -->\r\n\t\t<van-submit-bar :price=\"totalPrice | formatPoint\" button-text=\"提交订单\" @submit=\"onSubmit\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport util from '@/common/util/util'\r\n\timport topNav from '../../components/topNav.vue'\r\n\timport {\r\n\t\tpay_balance\r\n\t} from '../../common/pay/pay.js'\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgoodsId: [],\r\n\t\t\t\tlist: [],\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tisleftarrow: '',\r\n\t\t\t\tcheckedGoods: [],\r\n\t\t\t\tremark: '',\r\n\t\t\t\tchosenCoupon: -1,\r\n\t\t\t\tcoupons: [],\r\n\t\t\t\tdisabledCoupons: [],\r\n\t\t\t\tshowList: false,\r\n\t\t\t\tisNeedLogistics: true, // 是否需要物流信息\r\n\t\t\t\thasDiscount: false,\r\n\t\t\t\tgoodsInfo: [],\r\n\t\t\t\tisBalancePay: true, //  钱包支付\r\n\t\t\t\tbalance: 0,\r\n\t\t\t\texpireMinutes: 60,\r\n\t\t\t\tmarketing: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\ttopNav\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.$route.query.type === 'buy') {\r\n\t\t\t\tthis.goodsInfo = sessionStorage.get('buyInfo') || [];\r\n\t\t\t\tthis.marketing = this.goodsInfo[0].marketing;\r\n\t\t\t} else {\r\n\t\t\t\tlet cartInfo = util.storage.get('cartInfo');\r\n\t\t\t\tconst checkedGoods = this.$route.query.checkedGoods || [];\r\n\t\t\t\tcartInfo = checkedGoods.length ? cartInfo.filter(item => checkedGoods.indexOf(item.id) !== -1) : cartInfo;\r\n\t\t\t\tthis.goodsInfo = cartInfo;\r\n\t\t\t\t// console.log(this.goodsInfo);\r\n\t\t\t}\r\n\t\t\t// this.getCheckedGoods();\r\n\t\t\t// 默认地址\r\n\t\t\tthis.getDefaultAddress();\r\n\t\t\t// if (!this.defaultAddress.linkMan) {\r\n\t\t\t// \tthis.getDefaultAddress();\r\n\t\t\t// }\r\n\t\t\t// 账户余额\r\n\t\t\tthis.getUserAmount();\r\n\r\n\t\t\tif (this.marketing.type) {\r\n\t\t\t\tthis.expireMinutes = 0\r\n\t\t\t}\r\n\t\t\tif (!this.marketing.type) {\r\n\t\t\t\t// this.getMyDiscounts()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.title = this.$route.meta.title;\r\n\t\t\tthis.isleftarrow = this.$route.meta.isleftarrow;\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['defaultAddress']),\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tconst price = this.goodsInfo.reduce((total, item) => total + item.selectedNum * item.price, 0);\r\n\t\t\t\tconsole.log(parseFloat(price.toFixed(2)))\r\n\t\t\t\treturn price > 0 ? parseFloat(price.toFixed(2)) : (0).toFixed(2);\r\n\t\t\t\t// const price = this.goods.reduce((total, item) => total + (this.checkedGoods.indexOf(item.id) !== -1 ? item.price *\r\n\t\t\t\t// \titem.selectedNum : 0), 0);\r\n\t\t\t\t// return parseFloat(price.toFixed(2));\r\n\t\t\t},\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tformatPoint(val) {\r\n\t\t\t\treturn parseFloat((val * 100).toFixed(2));\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['updateDefaultAddress']),\r\n\t\t\tgetDefaultAddress() {\r\n\t\t\t\tthis.$request.get('/user/shipping-address/default', {\r\n\t\t\t\t\ttoken: util.storage.get('token')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.updateDefaultAddress(res.data || {});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserAmount() {\r\n\t\t\t\tthis.$request.get('/user/amount', {\r\n\t\t\t\t\ttoken: util.storage.get('token')\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.balance = res.data.balance;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonAddressChoose() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/address-list',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tisChoose: true\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonSubmit() {\r\n\t\t\t\tif (!this.defaultAddress.linkMan) {\r\n\t\t\t\t\tthis.$toast({\r\n\t\t\t\t\t\tmessage: '地址栏不能为空',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 提交订单\r\n\t\t\t\tthis.$toast.loading({\r\n\t\t\t\t\tmask: true,\r\n\t\t\t\t\tmessage: '订单创建中',\r\n\t\t\t\t\tduration: 0\r\n\t\t\t\t}); //duration: 0\r\n\t\t\t\tconsole.log(this.goodsInfo);\r\n\t\t\t\tconst goods = this.goodsInfo.map(item => ({\r\n\t\t\t\t\tgoodsId: item.goodsId,\r\n\t\t\t\t\tnumber: item.selectedNum,\r\n\t\t\t\t\tpropertyChildIds: item.propertyChildIds,\r\n\t\t\t\t\tlogisticsType: 0\r\n\t\t\t\t}));\r\n\t\t\t\tconsole.log(JSON.stringify(goods));\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\ttoken: util.storage.get('token'),\r\n\t\t\t\t\tgoodsJsonStr: JSON.stringify(goods),\r\n\t\t\t\t\tcalculate: false, // true 不实际下单，而是返回价格计算\r\n\t\t\t\t\texpireMinutes: this.expireMinutes, // 多少分钟未支付自动关闭本订单，传0不自动关闭订单\r\n\t\t\t\t\tpeisongType: 'kd', // 配送类型，kd 代表快递；zq代表到店自取\r\n\t\t\t\t\tremark: this.remark,\r\n\t\t\t\t\taddress: this.defaultAddress.address,\r\n\t\t\t\t\tprovinceId: this.defaultAddress.provinceId,\r\n\t\t\t\t\tcityId: this.defaultAddress.cityId,\r\n\t\t\t\t\tcode: this.defaultAddress.code,\r\n\t\t\t\t\tlinkMan: this.defaultAddress.linkMan,\r\n\t\t\t\t\tmobile: this.defaultAddress.mobile,\r\n\t\t\t\t\t// couponId: this.chosenCoupon !== -1 ? this.coupons[this.chosenCoupon].id : '', // 优惠券编号\r\n\t\t\t\t\t// kjid: this.marketing.kjid || '', // 砍价编号，可直接购买砍价商品\r\n\t\t\t\t\t// pingtuanOpenId: this.marketing.pingtuanOpenId, // 拼团购买的团号,不是拼团id\r\n\t\t\t\t\t// extJsonStr: JSON.stringify({\r\n\t\t\t\t\t//   discount: this.chosenCoupon !== -1 ? parseFloat((this.coupons[this.chosenCoupon].value / 100).toFixed(2)) : 0, // 优惠券抵扣金额\r\n\t\t\t\t\t//   marketing: this.marketing // 商品营销活动相关数据\r\n\t\t\t\t\t// })\r\n\t\t\t\t};\r\n\t\t\t\tthis.createOrder(params);\r\n\t\t\t},\r\n\t\t\tcreateOrder(params) {\r\n\t\t\t\tconsole.log(params);\r\n\t\t\t\tthis.$request.post('/order/create', params).then(res => {\r\n\t\t\t\t\tconsole.log('创建订单', res);\r\n\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\tthis.$toast(res.msg);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$toast.clear();\r\n\t\t\t\t\tconst orderResult = res.data;\r\n\t\t\t\t\t// 钱包支付订单\r\n\t\t\t\t\tthis.onPay(orderResult)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonPay(orderResult) {\r\n\t\t\t\tconsole.log(orderResult);\r\n\t\t\t\t// 支付方式(系统钱包支付,公众号支付未接入)\r\n\t\t\t\tconst orderId = orderResult.id; // 订单\r\n\t\t\t\tconst amountReal = orderResult.amountReal; // 订单总价\r\n\t\t\t\tconst goodsId = this.goodsInfo[0].goodsId // 拼团详情页需要用到\r\n\t\t\t\tconsole.log(orderId, amountReal, goodsId);\r\n\t\t\t\tif (this.isBalancePay) {\r\n\t\t\t\t\t//如果使用钱包支付\r\n\t\t\t\t\tthis.$dialog.confirm({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tmessage: '确认提交订单？',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t// on confirm\r\n\t\t\t\t\t\t\tthis.$toast.loading({\r\n\t\t\t\t\t\t\t\tmask: true,\r\n\t\t\t\t\t\t\t\tmessage: '支付提交中',\r\n\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tpay_balance(orderId, util.storage.get('token')).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log('支付结果', res);\r\n\t\t\t\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\t\t\t\tthis.$toast(res.msg)\r\n\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.$toast.clear();\r\n\t\t\t\t\t\t\t\tthis.removeStorageGoods();\r\n\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\tpath: '/order-detail?id='+orderId\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t// on cancel\r\n\t\t\t\t\t\t\t// this.$router.replace({\r\n\t\t\t\t\t\t\t// \tpath:'/home'\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.removeStorageGoods();\r\n\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\tpath: '/order-list?status=0'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveStorageGoods() {\r\n\t\t\t\t// 支付成功后移除已勾选的商品信息\r\n\t\t\t\tif (this.$route.query.type === 'buy') {\r\n\t\t\t\t\tsessionStorage.remove('buyInfo')\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet cartInfo = util.storage.get('cartInfo');\r\n\t\t\t\t\tconst checkedGoods = this.$route.query.checkedGoods || [];\r\n\t\t\t\t\tcartInfo = checkedGoods.length ? cartInfo.filter(item => !(checkedGoods.indexOf(item.id) !== -1)) : cartInfo;\r\n\t\t\t\t\tutil.storage.set('cartInfo', cartInfo);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.address-box {\r\n\t\tposition: relative;\r\n\t\tbox-sizing: border-box;\r\n\t\tmin-height: 70px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\tpadding: 8px 15px;\r\n\t\tbackground: #fff;\r\n\r\n\t\t&-hd {\r\n\t\t\tflex: 1;\r\n\t\t\t// padding:0 10px;\r\n\t\t\tpadding-left: 20px;\r\n\t\t}\r\n\r\n\t\t&-bd {\r\n\t\t\tpadding-left: 5px;\r\n\r\n\t\t}\r\n\r\n\t\t&-inner {\r\n\t\t\tposition: relative;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t&-icon {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 2px;\r\n\t\t\t\tleft: -20px;\r\n\t\t\t\tfont-size: 18px;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\r\n\t\t\t&-title {\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tmargin-bottom: 5px;\r\n\t\t\t}\r\n\r\n\t\t\t&-bottom {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\ttext-align: start;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:before {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\theight: 2px;\r\n\t\t\tbackground: -webkit-repeating-linear-gradient(135deg, #ff6c6c 0, #ff6c6c 20%, transparent 0, transparent 25%, #1989fa 0, #1989fa 45%, transparent 0, transparent 50%);\r\n\t\t\tbackground: repeating-linear-gradient(-45deg, #ff6c6c 0, #ff6c6c 20%, transparent 0, transparent 25%, #1989fa 0, #1989fa 45%, transparent 0, transparent 50%);\r\n\t\t\tbackground-size: 80px;\r\n\t\t\tcontent: '';\r\n\t\t}\r\n\t}\r\n\r\n\t.address-card {\r\n\t\tposition: relative;\r\n\t\tpadding: 10px 15px;\r\n\t\talign-items: center;\r\n\r\n\t\t&:before {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\theight: 2px;\r\n\t\t\tbackground: -webkit-repeating-linear-gradient(135deg, #ff6c6c 0, #ff6c6c 20%, transparent 0, transparent 25%, #1989fa 0, #1989fa 45%, transparent 0, transparent 50%);\r\n\t\t\tbackground: repeating-linear-gradient(-45deg, #ff6c6c 0, #ff6c6c 20%, transparent 0, transparent 25%, #1989fa 0, #1989fa 45%, transparent 0, transparent 50%);\r\n\t\t\tbackground-size: 80px;\r\n\t\t\tcontent: '';\r\n\t\t}\r\n\t}\r\n\r\n\t.address-card .van-cell__left-icon {\r\n\t\tcolor: #1989fa;\r\n\t\tfont-size: 40px;\r\n\t}\r\n\r\n\t.address-card .van-cell__title {\r\n\t\tline-height: 40px;\r\n\t}\r\n\r\n\t.order-info {\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: 100%;\r\n\t\t// padding:0 15px;\r\n\t\t// background: #fff;\r\n\t}\r\n\r\n\t.submit-bar-left {\r\n\t\tflex: 1;\r\n\t\tpadding-right: 12px;\r\n\t\tcolor: #323233;\r\n\t\tfont-weight: 500;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.submit-bar-left span {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t.submit-bar-price {\r\n\t\tcolor: #f44;\r\n\t\tfont-size: 18px;\r\n\t}\r\n\r\n\t.main {\r\n\t\tmargin-top: 10px;\r\n\t\tmargin-bottom: 100px;\r\n\t}\r\n\r\n\t.group {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.icon-logistics,\r\n\t.custom-title {\r\n\t\tfont-size: 14px;\r\n\t\t// display: inline-block;\r\n\t}\r\n\r\n\t.van-cell__title {\r\n\t\ttext-align: start !important;\r\n\t}\r\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./order-submit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./order-submit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./order-submit.vue?vue&type=template&id=7439fcba&scoped=true&\"\nimport script from \"./order-submit.vue?vue&type=script&lang=js&\"\nexport * from \"./order-submit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-submit.vue?vue&type=style&index=0&id=7439fcba&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7439fcba\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topNav.vue?vue&type=style&index=0&id=591cede4&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./order-submit.vue?vue&type=style&index=0&id=7439fcba&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"NavBar\"}},[_c('van-nav-bar',{attrs:{\"title\":_vm.title,\"left-text\":\"返回\",\"left-arrow\":_vm.isleftarrow},on:{\"click-left\":_vm.onClickLeft}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div id=\"NavBar\">\r\n\t\t<van-nav-bar :title=\"title\" left-text=\"返回\" :left-arrow=\"isleftarrow\" @click-left=\"onClickLeft\" />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops:[\r\n\t\t\t\"title\",\r\n\t\t\t\"isleftarrow\"\r\n\t\t],\r\n\t\tmethods: {\r\n\t\t\tonClickLeft() {\r\n\t\t\t\t// Toast('返回');\r\n\t\t\t\tthis.$router.go(-1);\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t#NavBar{\r\n\t\t\r\n\t}\r\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topNav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topNav.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topNav.vue?vue&type=template&id=591cede4&scoped=true&\"\nimport script from \"./topNav.vue?vue&type=script&lang=js&\"\nexport * from \"./topNav.vue?vue&type=script&lang=js&\"\nimport style0 from \"./topNav.vue?vue&type=style&index=0&id=591cede4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"591cede4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}