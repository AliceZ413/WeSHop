(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69f7e0d6"],{"24c7":function(t,n){t.exports="data:image/png;base64,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"},2532:function(t,n,e){"use strict";var a=e("23e7"),r=e("5a34"),i=e("1d80"),o=e("ab13");a({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,n,e){"use strict";var a=e("6eeb"),r=e("825a"),i=e("d039"),o=e("ad6d"),s="toString",c=RegExp.prototype,u=c[s],f=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),v=u.name!=s;(f||v)&&a(RegExp.prototype,s,(function(){var t=r(this),n=String(t.source),e=t.flags,a=String(void 0===e&&t instanceof RegExp&&!("flags"in c)?o.call(t):e);return"/"+n+"/"+a}),{unsafe:!0})},"29a2":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"a",(function(){return o}));e("d3b7"),e("25f0"),e("498a");function a(t){return"string"===typeof t||t instanceof String}function r(t){return"undefined"===typeof Array.isArray?"[object Array]"===Object.prototype.toString.call(t):Array.isArray(t)}function i(t){return null==t||(r(t)?0===t.length:a(t)?!"".concat(t).trim().length:"{}"===JSON.stringify(t))}function o(t){var n=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;return n.test(t)}},"44e7":function(t,n,e){var a=e("861d"),r=e("c6b6"),i=e("b622"),o=i("match");t.exports=function(t){var n;return a(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==r(t))}},4852:function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"setting-container"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-media"},[e("img",{staticClass:"user-avatar",attrs:{src:t.userInfo.avatarUrl,alt:""}})]),e("van-uploader",{staticClass:"header-setting",attrs:{"after-read":t.afterRead}},[e("van-button",{attrs:{icon:"plus",round:"",plain:"",size:"small",type:"default"}},[t._v("修改头像")])],1)],1),e("div",{staticClass:"main"},[e("div",{staticClass:"group balance-group"},[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称"},model:{value:t.userInfo.nick,callback:function(n){t.$set(t.userInfo,"nick",n)},expression:"userInfo.nick"}}),e("van-field",{attrs:{readonly:"",clickable:"",name:"picker",value:t.value,label:"城市",placeholder:"点击选择城市"},on:{click:function(n){t.showPicker=!0}}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(n){t.showPicker=n},expression:"showPicker"}},[e("van-area",{attrs:{title:"选择城市","area-list":t.areaList,"columns-num":2},on:{confirm:t.onConfirm,cancel:t.onClose}})],1),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v(" 提交 ")])],1)],1)],1)])])},r=[],i=(e("99af"),e("4160"),e("caad"),e("b0c0"),e("2532"),e("159b"),e("5530")),o=e("d072"),s=e("1c18"),c=e("29a2"),u={data:function(){return{userInfo:{},value:"",areaList:s["a"],showPicker:!1}},created:function(){this.getUserDetail()},methods:{getUserDetail:function(){var t=this;this.$request.get("/user/detail",{token:o["a"].storage.get("token")}).then((function(n){if(0===n.code){var a=n.data.base;t.userInfo=Object(i["a"])(Object(i["a"])({},n.data.base),{},{avatarUrl:a.avatarUrl||"".concat(e("24c7")),nick:a.nick||"".concat(a.sourceStr).concat(a.id)}),t.value=n.data.base.province+" "+n.data.base.city}}))},onSubmit:function(t){var n=this.userInfo.avatarUrl;Object(c["b"])(this.userInfo.nick)?this.$toast("昵称不能为空"):((n.includes("avatar_default")||n.includes("base64"))&&(console.log("默认头像"),n=""),this.$toast.loading({mask:!0,message:"提交中...",duration:0}),this.updateUserInfo(n,this.userInfo.city,this.userInfo.nick,this.userInfo.province))},updateUserInfo:function(t,n,e,a){var r=this;this.$request.post("/user/modify",{avatarUrl:this.userInfo.avatarUrl,city:this.userInfo.city,nick:this.userInfo.nick,province:this.userInfo.province,token:o["a"].storage.get("token")}).then((function(t){console.log(t),0===t.code?(r.$store.commit("updateUserInfo",r.userInfo),r.$toast("资料修改成功"),r.$router.go(-1)):r.$toast(t.msg)}),(function(t){r.$toast.clear()}))},onConfirm:function(t){var n="";t.forEach((function(t){n+=t.name+" "})),this.value=n,this.userInfo.province=t[0].name,this.userInfo.city=t[1].name,this.showPicker=!1},onClose:function(){this.showPicker=!1},afterRead:function(t){var n=this;this.$toast.loading({mask:!0,message:"上传中...",duration:0});var e=new FormData;e.append("upfile",t.file,"avatar.jpg"),e.append("token",o["a"].storage.get("token")),this.$request.uploadFile("/dfs/upload/file",e).then((function(t){console.log(t),0===t.code?(n.userInfo.avatarUrl=t.data.url,n.$toast("上传图片成功")):n.$toast(t.msg)}),(function(t){n.$toast("上传失败，请使用1M以内的图片")}))}}},f=u,v=(e("a63a"),e("2877")),l=Object(v["a"])(f,a,r,!1,null,"e8c10c8a",null);n["default"]=l.exports},"498a":function(t,n,e){"use strict";var a=e("23e7"),r=e("58a8").trim,i=e("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5899:function(t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,n,e){var a=e("1d80"),r=e("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(n){var e=String(a(n));return 1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(s,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(t,n,e){var a=e("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"99af":function(t,n,e){"use strict";var a=e("23e7"),r=e("d039"),i=e("e8b5"),o=e("861d"),s=e("7b0b"),c=e("50c4"),u=e("8418"),f=e("65f0"),v=e("1dde"),l=e("b622"),d=e("2d00"),p=l("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",m=d>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=v("concat"),k=function(t){if(!o(t))return!1;var n=t[p];return void 0!==n?!!n:i(t)},A=!m||!b;a({target:"Array",proto:!0,forced:A},{concat:function(t){var n,e,a,r,i,o=s(this),v=f(o,0),l=0;for(n=-1,a=arguments.length;n<a;n++)if(i=-1===n?o:arguments[n],k(i)){if(r=c(i.length),l+r>h)throw TypeError(g);for(e=0;e<r;e++,l++)e in i&&u(v,l,i[e])}else{if(l>=h)throw TypeError(g);u(v,l++,i)}return v.length=l,v}})},a63a:function(t,n,e){"use strict";e("cf1c")},ab13:function(t,n,e){var a=e("b622"),r=a("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,"/./"[t](n)}catch(a){}}return!1}},c8d2:function(t,n,e){var a=e("d039"),r=e("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!r[t]()||i[t]()!=i||r[t].name!==t}))}},caad:function(t,n,e){"use strict";var a=e("23e7"),r=e("4d64").includes,i=e("44d2"),o=e("ae40"),s=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!s},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},cf1c:function(t,n,e){}}]);
//# sourceMappingURL=chunk-69f7e0d6.e36781c8.js.map